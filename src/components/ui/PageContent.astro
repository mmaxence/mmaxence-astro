---
// Wrapper component for consistent page content animation
interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<main class={`page-content ${className}`} role="main">
  <slot />
</main>

<style>
  .page-content {
    opacity: 0;
    transform: translateY(20px);
    animation: pageContentFadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  @keyframes pageContentFadeIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Re-trigger animation on view transition */
  ::view-transition-new(root) .page-content {
    animation: pageContentFadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }
</style>

<script is:inline>
  // Re-trigger animation on view transition
  document.addEventListener('astro:page-load', () => {
    const pageContent = document.querySelector('.page-content');
    if (pageContent) {
      // Reset animation
      pageContent.style.animation = 'none';
      // Force reflow
      void pageContent.offsetWidth;
      // Re-apply animation
      pageContent.style.animation = '';
    }
  });
</script>
